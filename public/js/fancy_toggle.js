$.fn.fancytoggle=function(e){function t(t,n,i){t.css("height",t.attr(n)+"px"),t.css({transition:"height "+e.easing+" "+t.attr(i)+"ms"}).toggleClass("active")}function n(n,i){if(e.onItemClick.call(null,n,i),e.singleItemOpen===!0){var a=n.siblings(".active");t(a,"data-min-height","data-close-speed")}n.hasClass("active")?(t(n,"data-min-height","data-close-speed"),e.onItemClose.call(null,n,i)):(t(n,"data-max-height","data-open-speed"),e.onItemOpen.call(null,n,i))}function i(t){t.each(function(){var t=$(this),n=t.children(".title"),i=t.children(".content"),a=0,l=0;n&&(a+=n.outerHeight(!0),l+=n.outerHeight(!0)),i&&(a+=i.outerHeight(!0)),t.attr("data-max-height",a),t.attr("data-min-height",l),t.attr("data-close-speed",e.closeSpeed),t.attr("data-open-speed",e.openSpeed),t.hasClass("active")?t.height(a):t.height(l)})}return e=$.extend({openSpeed:400,closeSpeed:400,easing:"linear",singleItemOpen:!1,onItemClick:$.noop,onItemOpen:$.noop,onItemClosed:$.noop,initialOpenElement:""},e),this.each(function(){$(this).addClass("js-ftoggle");var a=$(this).children();if($(window).on("resize",function(){i(a)}),a.each(function(){var e=$(this);e.addClass("js-fchild"),e.wrapInner('<div class="content"></div>');var t=e.attr("data-jsfancytitle")||"Toggle";e.prepend('<div class="title">'+t+"</div>"),e.on("click",".title",function(e){n($(this).parent(),e)})}),i(a),e.initialOpenElement){var l=$(this).children(e.initialOpenElement);t(l,"data-max-height","closeSpeed")}}),this};